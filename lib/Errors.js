"use strict";

require("source-map-support/register");

const {
  withStatus,
  withExpose,
  withName,
  withExtraInfo
} = require('@k-suite/app/lib/utils/Helpers');

const HttpCode = require('http-status-codes');

const RichInfoError = withExtraInfo(withName(Error));
const RequestError = withExpose(RichInfoError);

class BadRequest extends withStatus(RequestError, HttpCode.BAD_REQUEST) {}

;

class NotFound extends withStatus(RequestError, HttpCode.NOT_FOUND) {}

;

class MethodNotAllowed extends withStatus(RequestError, HttpCode.METHOD_NOT_ALLOWED) {}

;

class ServerError extends withStatus(RichInfoError, HttpCode.INTERNAL_SERVER_ERROR) {
  constructor(message, code, otherExtra) {
    if (arguments.length === 2 && typeof code === 'object') {
      otherExtra = code;
      code = undefined;
    } else if (code !== undefined && otherExtra && !('code' in otherExtra)) {
      otherExtra = Object.assign({}, otherExtra, {
        code
      });
    }

    super(message, otherExtra);

    if (code !== undefined) {
      this.code = code;
    }
  }

}

class InvalidConfiguration extends ServerError {
  constructor(message, app, item) {
    super(message, 'E_INVALID_CONFIG', {
      app: app.name,
      configNode: item
    });
  }

}

exports.BadRequest = BadRequest;
exports.NotFound = NotFound;
exports.MethodNotAllowed = MethodNotAllowed;
exports.ServerError = ServerError;
exports.InvalidConfiguration = InvalidConfiguration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9FcnJvcnMuanMiXSwibmFtZXMiOlsid2l0aFN0YXR1cyIsIndpdGhFeHBvc2UiLCJ3aXRoTmFtZSIsIndpdGhFeHRyYUluZm8iLCJyZXF1aXJlIiwiSHR0cENvZGUiLCJSaWNoSW5mb0Vycm9yIiwiRXJyb3IiLCJSZXF1ZXN0RXJyb3IiLCJCYWRSZXF1ZXN0IiwiQkFEX1JFUVVFU1QiLCJOb3RGb3VuZCIsIk5PVF9GT1VORCIsIk1ldGhvZE5vdEFsbG93ZWQiLCJNRVRIT0RfTk9UX0FMTE9XRUQiLCJTZXJ2ZXJFcnJvciIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImNvZGUiLCJvdGhlckV4dHJhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiT2JqZWN0IiwiYXNzaWduIiwiSW52YWxpZENvbmZpZ3VyYXRpb24iLCJhcHAiLCJpdGVtIiwibmFtZSIsImNvbmZpZ05vZGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQU9BLE1BQU07QUFBRUEsRUFBQUEsVUFBRjtBQUFjQyxFQUFBQSxVQUFkO0FBQTBCQyxFQUFBQSxRQUExQjtBQUFvQ0MsRUFBQUE7QUFBcEMsSUFBc0RDLE9BQU8sQ0FBQyxnQ0FBRCxDQUFuRTs7QUFDQSxNQUFNQyxRQUFRLEdBQUdELE9BQU8sQ0FBQyxtQkFBRCxDQUF4Qjs7QUFFQSxNQUFNRSxhQUFhLEdBQUdILGFBQWEsQ0FBQ0QsUUFBUSxDQUFDSyxLQUFELENBQVQsQ0FBbkM7QUFDQSxNQUFNQyxZQUFZLEdBQUdQLFVBQVUsQ0FBQ0ssYUFBRCxDQUEvQjs7QUFVQSxNQUFNRyxVQUFOLFNBQXlCVCxVQUFVLENBQUNRLFlBQUQsRUFBZUgsUUFBUSxDQUFDSyxXQUF4QixDQUFuQyxDQUF3RTs7QUFDdkU7O0FBVUQsTUFBTUMsUUFBTixTQUF1QlgsVUFBVSxDQUFDUSxZQUFELEVBQWVILFFBQVEsQ0FBQ08sU0FBeEIsQ0FBakMsQ0FBb0U7O0FBRW5FOztBQVVELE1BQU1DLGdCQUFOLFNBQStCYixVQUFVLENBQUNRLFlBQUQsRUFBZUgsUUFBUSxDQUFDUyxrQkFBeEIsQ0FBekMsQ0FBcUY7O0FBRXBGOztBQVVELE1BQU1DLFdBQU4sU0FBMEJmLFVBQVUsQ0FBQ00sYUFBRCxFQUFnQkQsUUFBUSxDQUFDVyxxQkFBekIsQ0FBcEMsQ0FBb0Y7QUFNaEZDLEVBQUFBLFdBQVcsQ0FBQ0MsT0FBRCxFQUFVQyxJQUFWLEVBQWdCQyxVQUFoQixFQUE0QjtBQUNuQyxRQUFJQyxTQUFTLENBQUNDLE1BQVYsS0FBcUIsQ0FBckIsSUFBMEIsT0FBT0gsSUFBUCxLQUFnQixRQUE5QyxFQUF3RDtBQUNwREMsTUFBQUEsVUFBVSxHQUFHRCxJQUFiO0FBQ0FBLE1BQUFBLElBQUksR0FBR0ksU0FBUDtBQUNILEtBSEQsTUFHTyxJQUFJSixJQUFJLEtBQUtJLFNBQVQsSUFBc0JILFVBQXRCLElBQW9DLEVBQUUsVUFBVUEsVUFBWixDQUF4QyxFQUFpRTtBQUNwRUEsTUFBQUEsVUFBVSxHQUFHSSxNQUFNLENBQUNDLE1BQVAsQ0FBYyxFQUFkLEVBQWtCTCxVQUFsQixFQUE4QjtBQUFFRCxRQUFBQTtBQUFGLE9BQTlCLENBQWI7QUFDSDs7QUFFRCxVQUFNRCxPQUFOLEVBQWVFLFVBQWY7O0FBRUEsUUFBSUQsSUFBSSxLQUFLSSxTQUFiLEVBQXdCO0FBS3BCLFdBQUtKLElBQUwsR0FBWUEsSUFBWjtBQUNIO0FBQ0o7O0FBdkIrRTs7QUFrQ3BGLE1BQU1PLG9CQUFOLFNBQW1DWCxXQUFuQyxDQUErQztBQU0zQ0UsRUFBQUEsV0FBVyxDQUFDQyxPQUFELEVBQVVTLEdBQVYsRUFBZUMsSUFBZixFQUFxQjtBQUM1QixVQUFNVixPQUFOLEVBQWUsa0JBQWYsRUFBbUM7QUFBRVMsTUFBQUEsR0FBRyxFQUFFQSxHQUFHLENBQUNFLElBQVg7QUFBaUJDLE1BQUFBLFVBQVUsRUFBRUY7QUFBN0IsS0FBbkM7QUFDSDs7QUFSMEM7O0FBVy9DRyxPQUFPLENBQUN0QixVQUFSLEdBQXFCQSxVQUFyQjtBQUNBc0IsT0FBTyxDQUFDcEIsUUFBUixHQUFtQkEsUUFBbkI7QUFDQW9CLE9BQU8sQ0FBQ2xCLGdCQUFSLEdBQTJCQSxnQkFBM0I7QUFDQWtCLE9BQU8sQ0FBQ2hCLFdBQVIsR0FBc0JBLFdBQXRCO0FBQ0FnQixPQUFPLENBQUNMLG9CQUFSLEdBQStCQSxvQkFBL0IiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuLyoqXG4gKiBFcnJvciBkZWZpbml0aW9ucy5cbiAqIEBtb2R1bGUgRXJyb3JzXG4gKi9cblxuY29uc3QgeyB3aXRoU3RhdHVzLCB3aXRoRXhwb3NlLCB3aXRoTmFtZSwgd2l0aEV4dHJhSW5mbyB9ID0gcmVxdWlyZSgnQGstc3VpdGUvYXBwL2xpYi91dGlscy9IZWxwZXJzJyk7XG5jb25zdCBIdHRwQ29kZSA9IHJlcXVpcmUoJ2h0dHAtc3RhdHVzLWNvZGVzJyk7XG5cbmNvbnN0IFJpY2hJbmZvRXJyb3IgPSB3aXRoRXh0cmFJbmZvKHdpdGhOYW1lKEVycm9yKSk7XG5jb25zdCBSZXF1ZXN0RXJyb3IgPSB3aXRoRXhwb3NlKFJpY2hJbmZvRXJyb3IpO1xuXG4vKipcbiAqIEh0dHAgQmFkUmVxdWVzdCwgNDAwLlxuICogQGNsYXNzIFxuICogQGV4dGVuZHMgRXJyb3JcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgQmFkUmVxdWVzdCBleHRlbmRzIHdpdGhTdGF0dXMoUmVxdWVzdEVycm9yLCBIdHRwQ29kZS5CQURfUkVRVUVTVCkgeyAgICBcbn07XG5cbi8qKlxuICogSHR0cCBOb3RGb3VuZCwgNDA0LlxuICogQGNsYXNzIFxuICogQGV4dGVuZHMgRXJyb3JcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgTm90Rm91bmQgZXh0ZW5kcyB3aXRoU3RhdHVzKFJlcXVlc3RFcnJvciwgSHR0cENvZGUuTk9UX0ZPVU5EKSB7XG5cbn07XG5cbi8qKlxuICogSHR0cCBNZXRob2ROb3RBbGxvd2VkLCA0MDUuXG4gKiBAY2xhc3MgXG4gKiBAZXh0ZW5kcyBFcnJvclxuICogQG1peGVzIHdpdGhIdHRwU3RhdHVzXG4gKiBAbWl4ZXMgd2l0aE5hbWVcbiAqIEBtaXhlcyB3aXRoRXh0cmFJbmZvIFxuICovXG5jbGFzcyBNZXRob2ROb3RBbGxvd2VkIGV4dGVuZHMgd2l0aFN0YXR1cyhSZXF1ZXN0RXJyb3IsIEh0dHBDb2RlLk1FVEhPRF9OT1RfQUxMT1dFRCkge1xuXG59O1xuXG4vKipcbiAqIEVycm9yIGNhdXNlZCBieSBhbGwga2luZHMgb2YgcnVudGltZSBlcnJvcnMuXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIEVycm9yIFxuICogQG1peGVzIHdpdGhIdHRwU3RhdHVzXG4gKiBAbWl4ZXMgd2l0aE5hbWVcbiAqIEBtaXhlcyB3aXRoRXh0cmFJbmZvIFxuICovXG5jbGFzcyBTZXJ2ZXJFcnJvciBleHRlbmRzIHdpdGhTdGF0dXMoUmljaEluZm9FcnJvciwgSHR0cENvZGUuSU5URVJOQUxfU0VSVkVSX0VSUk9SKSB7XG4gICAgLyoqICAgICBcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEVycm9yIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0geyp9IGNvZGUgXG4gICAgICogQHBhcmFtIHsqfSBvdGhlckV4dHJhXG4gICAgICovXG4gICAgY29uc3RydWN0b3IobWVzc2FnZSwgY29kZSwgb3RoZXJFeHRyYSkge1xuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMiAmJiB0eXBlb2YgY29kZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIG90aGVyRXh0cmEgPSBjb2RlO1xuICAgICAgICAgICAgY29kZSA9IHVuZGVmaW5lZDsgICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIGlmIChjb2RlICE9PSB1bmRlZmluZWQgJiYgb3RoZXJFeHRyYSAmJiAhKCdjb2RlJyBpbiBvdGhlckV4dHJhKSkge1xuICAgICAgICAgICAgb3RoZXJFeHRyYSA9IE9iamVjdC5hc3NpZ24oe30sIG90aGVyRXh0cmEsIHsgY29kZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsIG90aGVyRXh0cmEpO1xuXG4gICAgICAgIGlmIChjb2RlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRXJyb3IgQ29kZVxuICAgICAgICAgICAgICogQG1lbWJlciB7aW50ZWdlcnxzdHJpbmd9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuY29kZSA9IGNvZGU7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogRXJyb3IgY2F1c2VkIGJ5IGludmFsaWQgY29uZmlndXJhdGlvbi5cbiAqIEBjbGFzc1xuICogQGV4dGVuZHMgRXJyb3IgIFxuICogQG1peGVzIHdpdGhIdHRwU3RhdHVzXG4gKiBAbWl4ZXMgd2l0aE5hbWVcbiAqIEBtaXhlcyB3aXRoRXh0cmFJbmZvIFxuICovXG5jbGFzcyBJbnZhbGlkQ29uZmlndXJhdGlvbiBleHRlbmRzIFNlcnZlckVycm9yIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIEVycm9yIG1lc3NhZ2VcbiAgICAgKiBAcGFyYW0ge0FwcH0gW2FwcF0gLSBUaGUgcmVsYXRlZCBhcHAgbW9kdWxlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IFtpdGVtXSAtIFRoZSByZWxhdGVkIGNvbmZpZyBpdGVtICAgXG4gICAgICovIFxuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGFwcCwgaXRlbSkgeyAgICAgICAgXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UsICdFX0lOVkFMSURfQ09ORklHJywgeyBhcHA6IGFwcC5uYW1lLCBjb25maWdOb2RlOiBpdGVtIH0pO1xuICAgIH1cbn1cblxuZXhwb3J0cy5CYWRSZXF1ZXN0ID0gQmFkUmVxdWVzdDtcbmV4cG9ydHMuTm90Rm91bmQgPSBOb3RGb3VuZDtcbmV4cG9ydHMuTWV0aG9kTm90QWxsb3dlZCA9IE1ldGhvZE5vdEFsbG93ZWQ7XG5leHBvcnRzLlNlcnZlckVycm9yID0gU2VydmVyRXJyb3I7XG5leHBvcnRzLkludmFsaWRDb25maWd1cmF0aW9uID0gSW52YWxpZENvbmZpZ3VyYXRpb247Il19
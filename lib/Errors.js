"use strict";

require("source-map-support/register");

const {
  withStatus
} = require('./utils/Helpers');

const {
  Errors: {
    RichInfoError,
    RequestError
  }
} = require('@k-suite/app');

const HttpCode = require('http-status-codes');

class BadRequest extends withStatus(RequestError, HttpCode.BAD_REQUEST) {}

;

class NotFound extends withStatus(RequestError, HttpCode.NOT_FOUND) {}

;

class MethodNotAllowed extends withStatus(RequestError, HttpCode.METHOD_NOT_ALLOWED) {}

;

class ServerError extends withStatus(RichInfoError, HttpCode.INTERNAL_SERVER_ERROR) {
  constructor(message, code, otherExtra) {
    if (arguments.length === 2 && typeof code === 'object') {
      otherExtra = code;
      code = undefined;
    } else if (code !== undefined && otherExtra && !('code' in otherExtra)) {
      otherExtra = Object.assign({}, otherExtra, {
        code
      });
    }

    super(message, otherExtra);

    if (code !== undefined) {
      this.code = code;
    }
  }

}

class InvalidConfiguration extends ServerError {
  constructor(message, app, item) {
    super(message, 'E_INVALID_CONFIG', {
      app: app.name,
      configNode: item
    });
  }

}

exports.BadRequest = BadRequest;
exports.NotFound = NotFound;
exports.MethodNotAllowed = MethodNotAllowed;
exports.ServerError = ServerError;
exports.InvalidConfiguration = InvalidConfiguration;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9FcnJvcnMuanMiXSwibmFtZXMiOlsid2l0aFN0YXR1cyIsInJlcXVpcmUiLCJFcnJvcnMiLCJSaWNoSW5mb0Vycm9yIiwiUmVxdWVzdEVycm9yIiwiSHR0cENvZGUiLCJCYWRSZXF1ZXN0IiwiQkFEX1JFUVVFU1QiLCJOb3RGb3VuZCIsIk5PVF9GT1VORCIsIk1ldGhvZE5vdEFsbG93ZWQiLCJNRVRIT0RfTk9UX0FMTE9XRUQiLCJTZXJ2ZXJFcnJvciIsIklOVEVSTkFMX1NFUlZFUl9FUlJPUiIsImNvbnN0cnVjdG9yIiwibWVzc2FnZSIsImNvZGUiLCJvdGhlckV4dHJhIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiT2JqZWN0IiwiYXNzaWduIiwiSW52YWxpZENvbmZpZ3VyYXRpb24iLCJhcHAiLCJpdGVtIiwibmFtZSIsImNvbmZpZ05vZGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQTs7OztBQU9BLE1BQU07QUFBRUEsRUFBQUE7QUFBRixJQUFpQkMsT0FBTyxDQUFDLGlCQUFELENBQTlCOztBQUNBLE1BQU07QUFBRUMsRUFBQUEsTUFBTSxFQUFFO0FBQUVDLElBQUFBLGFBQUY7QUFBaUJDLElBQUFBO0FBQWpCO0FBQVYsSUFBOENILE9BQU8sQ0FBQyxjQUFELENBQTNEOztBQUNBLE1BQU1JLFFBQVEsR0FBR0osT0FBTyxDQUFDLG1CQUFELENBQXhCOztBQVVBLE1BQU1LLFVBQU4sU0FBeUJOLFVBQVUsQ0FBQ0ksWUFBRCxFQUFlQyxRQUFRLENBQUNFLFdBQXhCLENBQW5DLENBQXdFOztBQUN2RTs7QUFVRCxNQUFNQyxRQUFOLFNBQXVCUixVQUFVLENBQUNJLFlBQUQsRUFBZUMsUUFBUSxDQUFDSSxTQUF4QixDQUFqQyxDQUFvRTs7QUFFbkU7O0FBVUQsTUFBTUMsZ0JBQU4sU0FBK0JWLFVBQVUsQ0FBQ0ksWUFBRCxFQUFlQyxRQUFRLENBQUNNLGtCQUF4QixDQUF6QyxDQUFxRjs7QUFFcEY7O0FBVUQsTUFBTUMsV0FBTixTQUEwQlosVUFBVSxDQUFDRyxhQUFELEVBQWdCRSxRQUFRLENBQUNRLHFCQUF6QixDQUFwQyxDQUFvRjtBQU1oRkMsRUFBQUEsV0FBVyxDQUFDQyxPQUFELEVBQVVDLElBQVYsRUFBZ0JDLFVBQWhCLEVBQTRCO0FBQ25DLFFBQUlDLFNBQVMsQ0FBQ0MsTUFBVixLQUFxQixDQUFyQixJQUEwQixPQUFPSCxJQUFQLEtBQWdCLFFBQTlDLEVBQXdEO0FBQ3BEQyxNQUFBQSxVQUFVLEdBQUdELElBQWI7QUFDQUEsTUFBQUEsSUFBSSxHQUFHSSxTQUFQO0FBQ0gsS0FIRCxNQUdPLElBQUlKLElBQUksS0FBS0ksU0FBVCxJQUFzQkgsVUFBdEIsSUFBb0MsRUFBRSxVQUFVQSxVQUFaLENBQXhDLEVBQWlFO0FBQ3BFQSxNQUFBQSxVQUFVLEdBQUdJLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjLEVBQWQsRUFBa0JMLFVBQWxCLEVBQThCO0FBQUVELFFBQUFBO0FBQUYsT0FBOUIsQ0FBYjtBQUNIOztBQUVELFVBQU1ELE9BQU4sRUFBZUUsVUFBZjs7QUFFQSxRQUFJRCxJQUFJLEtBQUtJLFNBQWIsRUFBd0I7QUFLcEIsV0FBS0osSUFBTCxHQUFZQSxJQUFaO0FBQ0g7QUFDSjs7QUF2QitFOztBQWtDcEYsTUFBTU8sb0JBQU4sU0FBbUNYLFdBQW5DLENBQStDO0FBTTNDRSxFQUFBQSxXQUFXLENBQUNDLE9BQUQsRUFBVVMsR0FBVixFQUFlQyxJQUFmLEVBQXFCO0FBQzVCLFVBQU1WLE9BQU4sRUFBZSxrQkFBZixFQUFtQztBQUFFUyxNQUFBQSxHQUFHLEVBQUVBLEdBQUcsQ0FBQ0UsSUFBWDtBQUFpQkMsTUFBQUEsVUFBVSxFQUFFRjtBQUE3QixLQUFuQztBQUNIOztBQVIwQzs7QUFXL0NHLE9BQU8sQ0FBQ3RCLFVBQVIsR0FBcUJBLFVBQXJCO0FBQ0FzQixPQUFPLENBQUNwQixRQUFSLEdBQW1CQSxRQUFuQjtBQUNBb0IsT0FBTyxDQUFDbEIsZ0JBQVIsR0FBMkJBLGdCQUEzQjtBQUNBa0IsT0FBTyxDQUFDaEIsV0FBUixHQUFzQkEsV0FBdEI7QUFDQWdCLE9BQU8sQ0FBQ0wsb0JBQVIsR0FBK0JBLG9CQUEvQiIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIEVycm9yIGRlZmluaXRpb25zLlxuICogQG1vZHVsZSBFcnJvcnNcbiAqL1xuXG5jb25zdCB7IHdpdGhTdGF0dXMgfSA9IHJlcXVpcmUoJy4vdXRpbHMvSGVscGVycycpO1xuY29uc3QgeyBFcnJvcnM6IHsgUmljaEluZm9FcnJvciwgUmVxdWVzdEVycm9yIH0gfSA9IHJlcXVpcmUoJ0BrLXN1aXRlL2FwcCcpO1xuY29uc3QgSHR0cENvZGUgPSByZXF1aXJlKCdodHRwLXN0YXR1cy1jb2RlcycpO1xuXG4vKipcbiAqIEh0dHAgQmFkUmVxdWVzdCwgNDAwLlxuICogQGNsYXNzIFxuICogQGV4dGVuZHMgRXJyb3JcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgQmFkUmVxdWVzdCBleHRlbmRzIHdpdGhTdGF0dXMoUmVxdWVzdEVycm9yLCBIdHRwQ29kZS5CQURfUkVRVUVTVCkgeyAgICAgICAgXG59O1xuXG4vKipcbiAqIEh0dHAgTm90Rm91bmQsIDQwNC5cbiAqIEBjbGFzcyBcbiAqIEBleHRlbmRzIEVycm9yXG4gKiBAbWl4ZXMgd2l0aEh0dHBTdGF0dXNcbiAqIEBtaXhlcyB3aXRoTmFtZVxuICogQG1peGVzIHdpdGhFeHRyYUluZm8gXG4gKi9cbmNsYXNzIE5vdEZvdW5kIGV4dGVuZHMgd2l0aFN0YXR1cyhSZXF1ZXN0RXJyb3IsIEh0dHBDb2RlLk5PVF9GT1VORCkge1xuXG59O1xuXG4vKipcbiAqIEh0dHAgTWV0aG9kTm90QWxsb3dlZCwgNDA1LlxuICogQGNsYXNzIFxuICogQGV4dGVuZHMgRXJyb3JcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgTWV0aG9kTm90QWxsb3dlZCBleHRlbmRzIHdpdGhTdGF0dXMoUmVxdWVzdEVycm9yLCBIdHRwQ29kZS5NRVRIT0RfTk9UX0FMTE9XRUQpIHtcblxufTtcblxuLyoqXG4gKiBFcnJvciBjYXVzZWQgYnkgYWxsIGtpbmRzIG9mIHJ1bnRpbWUgZXJyb3JzLlxuICogQGNsYXNzXG4gKiBAZXh0ZW5kcyBFcnJvciBcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgU2VydmVyRXJyb3IgZXh0ZW5kcyB3aXRoU3RhdHVzKFJpY2hJbmZvRXJyb3IsIEh0dHBDb2RlLklOVEVSTkFMX1NFUlZFUl9FUlJPUikge1xuICAgIC8qKiAgICAgXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBFcnJvciBtZXNzYWdlXG4gICAgICogQHBhcmFtIHsqfSBjb2RlIFxuICAgICAqIEBwYXJhbSB7Kn0gb3RoZXJFeHRyYVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKG1lc3NhZ2UsIGNvZGUsIG90aGVyRXh0cmEpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIgJiYgdHlwZW9mIGNvZGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBvdGhlckV4dHJhID0gY29kZTtcbiAgICAgICAgICAgIGNvZGUgPSB1bmRlZmluZWQ7ICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZSAhPT0gdW5kZWZpbmVkICYmIG90aGVyRXh0cmEgJiYgISgnY29kZScgaW4gb3RoZXJFeHRyYSkpIHtcbiAgICAgICAgICAgIG90aGVyRXh0cmEgPSBPYmplY3QuYXNzaWduKHt9LCBvdGhlckV4dHJhLCB7IGNvZGUgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcihtZXNzYWdlLCBvdGhlckV4dHJhKTtcblxuICAgICAgICBpZiAoY29kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVycm9yIENvZGVcbiAgICAgICAgICAgICAqIEBtZW1iZXIge2ludGVnZXJ8c3RyaW5nfVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEVycm9yIGNhdXNlZCBieSBpbnZhbGlkIGNvbmZpZ3VyYXRpb24uXG4gKiBAY2xhc3NcbiAqIEBleHRlbmRzIEVycm9yICBcbiAqIEBtaXhlcyB3aXRoSHR0cFN0YXR1c1xuICogQG1peGVzIHdpdGhOYW1lXG4gKiBAbWl4ZXMgd2l0aEV4dHJhSW5mbyBcbiAqL1xuY2xhc3MgSW52YWxpZENvbmZpZ3VyYXRpb24gZXh0ZW5kcyBTZXJ2ZXJFcnJvciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2UgLSBFcnJvciBtZXNzYWdlXG4gICAgICogQHBhcmFtIHtBcHB9IFthcHBdIC0gVGhlIHJlbGF0ZWQgYXBwIG1vZHVsZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBbaXRlbV0gLSBUaGUgcmVsYXRlZCBjb25maWcgaXRlbSAgIFxuICAgICAqLyBcbiAgICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBhcHAsIGl0ZW0pIHsgICAgICAgIFxuICAgICAgICBzdXBlcihtZXNzYWdlLCAnRV9JTlZBTElEX0NPTkZJRycsIHsgYXBwOiBhcHAubmFtZSwgY29uZmlnTm9kZTogaXRlbSB9KTtcbiAgICB9XG59XG5cbmV4cG9ydHMuQmFkUmVxdWVzdCA9IEJhZFJlcXVlc3Q7XG5leHBvcnRzLk5vdEZvdW5kID0gTm90Rm91bmQ7XG5leHBvcnRzLk1ldGhvZE5vdEFsbG93ZWQgPSBNZXRob2ROb3RBbGxvd2VkO1xuZXhwb3J0cy5TZXJ2ZXJFcnJvciA9IFNlcnZlckVycm9yO1xuZXhwb3J0cy5JbnZhbGlkQ29uZmlndXJhdGlvbiA9IEludmFsaWRDb25maWd1cmF0aW9uOyJdfQ==
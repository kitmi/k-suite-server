"use strict";

require("source-map-support/register");

const _ = require('rk-utils')._;

const {
  InvalidConfiguration
} = require('../Errors');

exports.requireFeatures = function (features, app, middleware) {
  let hasNotEnabled = _.find(_.castArray(features), feature => !app.enabled(feature));

  if (hasNotEnabled) {
    throw new InvalidConfiguration(`"${middleware}" requires "${hasNotEnabled}" feature to be enabled.`, app, `middlewares.${middleware}`);
  }
};

exports.hasMethod = function hasMethod(obj, name) {
  const desc = Object.getOwnPropertyDescriptor(obj, name);
  let has = !!desc && typeof desc.value === 'function';
  if (has) return true;
  let proto = Object.getPrototypeOf(obj);
  if (proto === Object.prototype) return has;
  return hasMethod(proto, name);
};

exports.withStatus = (Base, STATUS) => {
  var _temp;

  return _temp = class extends Base {
    constructor(...args) {
      super(...args);
      this.status = STATUS;
    }

  }, _temp;
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9IZWxwZXJzLmpzIl0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiSW52YWxpZENvbmZpZ3VyYXRpb24iLCJleHBvcnRzIiwicmVxdWlyZUZlYXR1cmVzIiwiZmVhdHVyZXMiLCJhcHAiLCJtaWRkbGV3YXJlIiwiaGFzTm90RW5hYmxlZCIsImZpbmQiLCJjYXN0QXJyYXkiLCJmZWF0dXJlIiwiZW5hYmxlZCIsImhhc01ldGhvZCIsIm9iaiIsIm5hbWUiLCJkZXNjIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiaGFzIiwidmFsdWUiLCJwcm90byIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwid2l0aFN0YXR1cyIsIkJhc2UiLCJTVEFUVVMiLCJzdGF0dXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7O0FBRUEsTUFBTUEsQ0FBQyxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUFQLENBQW9CRCxDQUE5Qjs7QUFDQSxNQUFNO0FBQUVFLEVBQUFBO0FBQUYsSUFBMkJELE9BQU8sQ0FBQyxXQUFELENBQXhDOztBQUVBRSxPQUFPLENBQUNDLGVBQVIsR0FBMEIsVUFBVUMsUUFBVixFQUFvQkMsR0FBcEIsRUFBeUJDLFVBQXpCLEVBQXFDO0FBQzNELE1BQUlDLGFBQWEsR0FBR1IsQ0FBQyxDQUFDUyxJQUFGLENBQU9ULENBQUMsQ0FBQ1UsU0FBRixDQUFZTCxRQUFaLENBQVAsRUFBOEJNLE9BQU8sSUFBSSxDQUFDTCxHQUFHLENBQUNNLE9BQUosQ0FBWUQsT0FBWixDQUExQyxDQUFwQjs7QUFFQSxNQUFJSCxhQUFKLEVBQW1CO0FBQ2YsVUFBTSxJQUFJTixvQkFBSixDQUNELElBQUdLLFVBQVcsZUFBY0MsYUFBYywwQkFEekMsRUFFRkYsR0FGRSxFQUdELGVBQWNDLFVBQVcsRUFIeEIsQ0FBTjtBQUtIO0FBQ0osQ0FWRDs7QUFZQUosT0FBTyxDQUFDVSxTQUFSLEdBQW9CLFNBQVNBLFNBQVQsQ0FBbUJDLEdBQW5CLEVBQXdCQyxJQUF4QixFQUE4QjtBQUM5QyxRQUFNQyxJQUFJLEdBQUdDLE1BQU0sQ0FBQ0Msd0JBQVAsQ0FBZ0NKLEdBQWhDLEVBQXFDQyxJQUFyQyxDQUFiO0FBQ0EsTUFBSUksR0FBRyxHQUFHLENBQUMsQ0FBQ0gsSUFBRixJQUFVLE9BQU9BLElBQUksQ0FBQ0ksS0FBWixLQUFzQixVQUExQztBQUNBLE1BQUlELEdBQUosRUFBUyxPQUFPLElBQVA7QUFFVCxNQUFJRSxLQUFLLEdBQUdKLE1BQU0sQ0FBQ0ssY0FBUCxDQUFzQlIsR0FBdEIsQ0FBWjtBQUNBLE1BQUlPLEtBQUssS0FBS0osTUFBTSxDQUFDTSxTQUFyQixFQUFnQyxPQUFPSixHQUFQO0FBRWhDLFNBQU9OLFNBQVMsQ0FBQ1EsS0FBRCxFQUFRTixJQUFSLENBQWhCO0FBQ0gsQ0FURDs7QUFpQkFaLE9BQU8sQ0FBQ3FCLFVBQVIsR0FBcUIsQ0FBQ0MsSUFBRCxFQUFPQyxNQUFQO0FBQUE7O0FBQUEsaUJBQWtCLGNBQWNELElBQWQsQ0FBbUI7QUFBQTtBQUFBO0FBQUEsV0FLdERFLE1BTHNELEdBSzdDRCxNQUw2QztBQUFBOztBQUFBLEdBQXJDO0FBQUEsQ0FBckIiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuY29uc3QgXyA9IHJlcXVpcmUoJ3JrLXV0aWxzJykuXztcbmNvbnN0IHsgSW52YWxpZENvbmZpZ3VyYXRpb24gfSA9IHJlcXVpcmUoJy4uL0Vycm9ycycpO1xuXG5leHBvcnRzLnJlcXVpcmVGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlcywgYXBwLCBtaWRkbGV3YXJlKSB7XG4gICAgbGV0IGhhc05vdEVuYWJsZWQgPSBfLmZpbmQoXy5jYXN0QXJyYXkoZmVhdHVyZXMpLCBmZWF0dXJlID0+ICFhcHAuZW5hYmxlZChmZWF0dXJlKSk7XG5cbiAgICBpZiAoaGFzTm90RW5hYmxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgSW52YWxpZENvbmZpZ3VyYXRpb24oXG4gICAgICAgICAgICBgXCIke21pZGRsZXdhcmV9XCIgcmVxdWlyZXMgXCIke2hhc05vdEVuYWJsZWR9XCIgZmVhdHVyZSB0byBiZSBlbmFibGVkLmAsXG4gICAgICAgICAgICBhcHAsXG4gICAgICAgICAgICBgbWlkZGxld2FyZXMuJHttaWRkbGV3YXJlfWBcbiAgICAgICAgKTtcbiAgICB9XG59O1xuXG5leHBvcnRzLmhhc01ldGhvZCA9IGZ1bmN0aW9uIGhhc01ldGhvZChvYmosIG5hbWUpIHtcbiAgICBjb25zdCBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIG5hbWUpOyAgICBcbiAgICBsZXQgaGFzID0gISFkZXNjICYmIHR5cGVvZiBkZXNjLnZhbHVlID09PSAnZnVuY3Rpb24nO1xuICAgIGlmIChoYXMpIHJldHVybiB0cnVlO1xuXG4gICAgbGV0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iaik7XG4gICAgaWYgKHByb3RvID09PSBPYmplY3QucHJvdG90eXBlKSByZXR1cm4gaGFzO1xuXG4gICAgcmV0dXJuIGhhc01ldGhvZChwcm90bywgbmFtZSk7XG59O1xuXG4vKipcbiAqIEFkZHMgYSBzdGF0dXMgcHJvcGVydHkgdG8gdGhlIGNsYXNzLlxuICogQG1peGluXG4gKiBAcGFyYW0geyp9IEJhc2UgXG4gKiBAcGFyYW0geyp9IFNUQVRVUyBcbiAqL1xuZXhwb3J0cy53aXRoU3RhdHVzID0gKEJhc2UsIFNUQVRVUykgPT4gY2xhc3MgZXh0ZW5kcyBCYXNlIHtcbiAgICAvKipcbiAgICAgKiBTdGF0dXMgY29kZS5cbiAgICAgKiBAbWVtYmVyIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3RhdHVzID0gU1RBVFVTO1xufTsiXX0=
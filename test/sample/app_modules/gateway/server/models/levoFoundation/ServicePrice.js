"use strict";

require("source-map-support/register");

const {
  _
} = require('rk-utils');

const {
  Types,
  Validators,
  Processors,
  Generators,
  Errors: {
    BusinessError,
    DataValidationError,
    DsOperationError
  },
  Utils: {
    Lang: {
      isNothing
    }
  }
} = require('@k-suite/oolong');

module.exports = (db, BaseEntityModel) => {
  const ServicePriceSpec = class extends BaseEntityModel {
    static async applyModifiers_(context, isUpdating) {
      let {
        raw,
        latest,
        existing,
        i18n
      } = context;
      existing || (existing = {});
      return context;
    }

  };
  ServicePriceSpec.db = db;
  ServicePriceSpec.meta = {
    "schemaName": "levoFoundation",
    "name": "servicePrice",
    "keyField": "id",
    "fields": {
      "startDate": {
        "type": "datetime",
        "default": {
          "oolType": "SymbolToken",
          "name": "now"
        },
        "displayName": "Start Date"
      },
      "endDate": {
        "type": "datetime",
        "optional": true,
        "displayName": "End Date"
      },
      "isValid": {
        "type": "boolean",
        "displayName": "Is Valid",
        "createByDb": true
      },
      "id": {
        "type": "integer",
        "auto": true,
        "writeOnce": true,
        "displayName": "Id",
        "autoIncrementId": true,
        "createByDb": true
      },
      "unit": {
        "type": "text",
        "maxLength": 20,
        "displayName": "Unit",
        "createByDb": true
      },
      "quantity": {
        "type": "integer",
        "displayName": "Quantity",
        "createByDb": true
      },
      "amount": {
        "type": "number",
        "subClass": ["money"],
        "displayName": "Amount",
        "createByDb": true
      },
      "desc": {
        "type": "text",
        "optional": true,
        "subClass": ["desc"],
        "displayName": "Desc"
      },
      "service": {
        "type": "integer",
        "displayName": "serviceId",
        "createByDb": true
      },
      "serviceLevel": {
        "type": "text",
        "maxLength": 20,
        "subClass": ["code"],
        "displayName": "serviceLevelCode",
        "createByDb": true
      }
    },
    "features": {
      "autoId": {
        "field": "id"
      }
    },
    "uniqueKeys": [["id"]],
    "associations": {
      "service": {
        "entity": "service",
        "isList": false
      },
      "serviceLevel": {
        "entity": "serviceLevel",
        "isList": false
      },
      "promotions": {
        "entity": "servicePromotion",
        "isList": true,
        "remoteField": "price",
        "optional": true
      }
    },
    "fieldDependencies": {
      "id": ["id"]
    }
  };
  return Object.assign(ServicePriceSpec, {});
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9tb2RlbHMvbGV2b0ZvdW5kYXRpb24vU2VydmljZVByaWNlLmpzIl0sIm5hbWVzIjpbIl8iLCJyZXF1aXJlIiwiVHlwZXMiLCJWYWxpZGF0b3JzIiwiUHJvY2Vzc29ycyIsIkdlbmVyYXRvcnMiLCJFcnJvcnMiLCJCdXNpbmVzc0Vycm9yIiwiRGF0YVZhbGlkYXRpb25FcnJvciIsIkRzT3BlcmF0aW9uRXJyb3IiLCJVdGlscyIsIkxhbmciLCJpc05vdGhpbmciLCJtb2R1bGUiLCJleHBvcnRzIiwiZGIiLCJCYXNlRW50aXR5TW9kZWwiLCJTZXJ2aWNlUHJpY2VTcGVjIiwiYXBwbHlNb2RpZmllcnNfIiwiY29udGV4dCIsImlzVXBkYXRpbmciLCJyYXciLCJsYXRlc3QiLCJleGlzdGluZyIsImkxOG4iLCJtZXRhIiwiT2JqZWN0IiwiYXNzaWduIl0sIm1hcHBpbmdzIjoiOzs7O0FBQUEsTUFBTTtBQUFFQSxFQUFBQTtBQUFGLElBQVFDLE9BQU8sQ0FBQyxVQUFELENBQXJCOztBQUVBLE1BQU07QUFDRkMsRUFBQUEsS0FERTtBQUVGQyxFQUFBQSxVQUZFO0FBR0ZDLEVBQUFBLFVBSEU7QUFJRkMsRUFBQUEsVUFKRTtBQUtGQyxFQUFBQSxNQUFNLEVBQUU7QUFBRUMsSUFBQUEsYUFBRjtBQUFpQkMsSUFBQUEsbUJBQWpCO0FBQXNDQyxJQUFBQTtBQUF0QyxHQUxOO0FBTUZDLEVBQUFBLEtBQUssRUFBRTtBQUFFQyxJQUFBQSxJQUFJLEVBQUU7QUFBRUMsTUFBQUE7QUFBRjtBQUFSO0FBTkwsSUFPRlgsT0FBTyxDQUFDLGlCQUFELENBUFg7O0FBVUFZLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQixDQUFDQyxFQUFELEVBQUtDLGVBQUwsS0FBeUI7QUFDdEMsUUFBTUMsZ0JBQWdCLEdBQUcsY0FBY0QsZUFBZCxDQUE4QjtBQU9uRCxpQkFBYUUsZUFBYixDQUE2QkMsT0FBN0IsRUFBc0NDLFVBQXRDLEVBQWtEO0FBQzlDLFVBQUk7QUFBQ0MsUUFBQUEsR0FBRDtBQUFNQyxRQUFBQSxNQUFOO0FBQWNDLFFBQUFBLFFBQWQ7QUFBd0JDLFFBQUFBO0FBQXhCLFVBQWdDTCxPQUFwQztBQUNBSSxNQUFBQSxRQUFRLEtBQUtBLFFBQVEsR0FBRyxFQUFoQixDQUFSO0FBQ0EsYUFBT0osT0FBUDtBQUNIOztBQVhrRCxHQUF2RDtBQWNBRixFQUFBQSxnQkFBZ0IsQ0FBQ0YsRUFBakIsR0FBc0JBLEVBQXRCO0FBQ0FFLEVBQUFBLGdCQUFnQixDQUFDUSxJQUFqQixHQUF3QjtBQUNwQixrQkFBYyxnQkFETTtBQUVwQixZQUFRLGNBRlk7QUFHcEIsZ0JBQVksSUFIUTtBQUlwQixjQUFVO0FBQ04sbUJBQWE7QUFDVCxnQkFBUSxVQURDO0FBRVQsbUJBQVc7QUFDUCxxQkFBVyxhQURKO0FBRVAsa0JBQVE7QUFGRCxTQUZGO0FBTVQsdUJBQWU7QUFOTixPQURQO0FBU04saUJBQVc7QUFDUCxnQkFBUSxVQUREO0FBRVAsb0JBQVksSUFGTDtBQUdQLHVCQUFlO0FBSFIsT0FUTDtBQWNOLGlCQUFXO0FBQ1AsZ0JBQVEsU0FERDtBQUVQLHVCQUFlLFVBRlI7QUFHUCxzQkFBYztBQUhQLE9BZEw7QUFtQk4sWUFBTTtBQUNGLGdCQUFRLFNBRE47QUFFRixnQkFBUSxJQUZOO0FBR0YscUJBQWEsSUFIWDtBQUlGLHVCQUFlLElBSmI7QUFLRiwyQkFBbUIsSUFMakI7QUFNRixzQkFBYztBQU5aLE9BbkJBO0FBMkJOLGNBQVE7QUFDSixnQkFBUSxNQURKO0FBRUoscUJBQWEsRUFGVDtBQUdKLHVCQUFlLE1BSFg7QUFJSixzQkFBYztBQUpWLE9BM0JGO0FBaUNOLGtCQUFZO0FBQ1IsZ0JBQVEsU0FEQTtBQUVSLHVCQUFlLFVBRlA7QUFHUixzQkFBYztBQUhOLE9BakNOO0FBc0NOLGdCQUFVO0FBQ04sZ0JBQVEsUUFERjtBQUVOLG9CQUFZLENBQ1IsT0FEUSxDQUZOO0FBS04sdUJBQWUsUUFMVDtBQU1OLHNCQUFjO0FBTlIsT0F0Q0o7QUE4Q04sY0FBUTtBQUNKLGdCQUFRLE1BREo7QUFFSixvQkFBWSxJQUZSO0FBR0osb0JBQVksQ0FDUixNQURRLENBSFI7QUFNSix1QkFBZTtBQU5YLE9BOUNGO0FBc0ROLGlCQUFXO0FBQ1AsZ0JBQVEsU0FERDtBQUVQLHVCQUFlLFdBRlI7QUFHUCxzQkFBYztBQUhQLE9BdERMO0FBMkROLHNCQUFnQjtBQUNaLGdCQUFRLE1BREk7QUFFWixxQkFBYSxFQUZEO0FBR1osb0JBQVksQ0FDUixNQURRLENBSEE7QUFNWix1QkFBZSxrQkFOSDtBQU9aLHNCQUFjO0FBUEY7QUEzRFYsS0FKVTtBQXlFcEIsZ0JBQVk7QUFDUixnQkFBVTtBQUNOLGlCQUFTO0FBREg7QUFERixLQXpFUTtBQThFcEIsa0JBQWMsQ0FDVixDQUNJLElBREosQ0FEVSxDQTlFTTtBQW1GcEIsb0JBQWdCO0FBQ1osaUJBQVc7QUFDUCxrQkFBVSxTQURIO0FBRVAsa0JBQVU7QUFGSCxPQURDO0FBS1osc0JBQWdCO0FBQ1osa0JBQVUsY0FERTtBQUVaLGtCQUFVO0FBRkUsT0FMSjtBQVNaLG9CQUFjO0FBQ1Ysa0JBQVUsa0JBREE7QUFFVixrQkFBVSxJQUZBO0FBR1YsdUJBQWUsT0FITDtBQUlWLG9CQUFZO0FBSkY7QUFURixLQW5GSTtBQW1HcEIseUJBQXFCO0FBQ2pCLFlBQU0sQ0FDRixJQURFO0FBRFc7QUFuR0QsR0FBeEI7QUEwR0EsU0FBT0MsTUFBTSxDQUFDQyxNQUFQLENBQWNWLGdCQUFkLEVBQWdDLEVBQWhDLENBQVA7QUFDSCxDQTNIRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgXyB9ID0gcmVxdWlyZSgncmstdXRpbHMnKTtcblxuY29uc3QgeyBcbiAgICBUeXBlcyxcbiAgICBWYWxpZGF0b3JzLCBcbiAgICBQcm9jZXNzb3JzLCBcbiAgICBHZW5lcmF0b3JzLCBcbiAgICBFcnJvcnM6IHsgQnVzaW5lc3NFcnJvciwgRGF0YVZhbGlkYXRpb25FcnJvciwgRHNPcGVyYXRpb25FcnJvciB9LCBcbiAgICBVdGlsczogeyBMYW5nOiB7IGlzTm90aGluZyB9IH0gXG59ID0gcmVxdWlyZSgnQGstc3VpdGUvb29sb25nJyk7XG4gXG5cbm1vZHVsZS5leHBvcnRzID0gKGRiLCBCYXNlRW50aXR5TW9kZWwpID0+IHtcbiAgICBjb25zdCBTZXJ2aWNlUHJpY2VTcGVjID0gY2xhc3MgZXh0ZW5kcyBCYXNlRW50aXR5TW9kZWwgeyAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFwcGx5aW5nIHByZWRlZmluZWQgbW9kaWZpZXJzIHRvIGVudGl0eSBmaWVsZHMuXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0XG4gICAgICAgICAqIEBwYXJhbSBpc1VwZGF0aW5nXG4gICAgICAgICAqIEByZXR1cm5zIHsqfVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhdGljIGFzeW5jIGFwcGx5TW9kaWZpZXJzXyhjb250ZXh0LCBpc1VwZGF0aW5nKSB7XG4gICAgICAgICAgICBsZXQge3JhdywgbGF0ZXN0LCBleGlzdGluZywgaTE4bn0gPSBjb250ZXh0O1xuICAgICAgICAgICAgZXhpc3RpbmcgfHwgKGV4aXN0aW5nID0ge30pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQ7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2VydmljZVByaWNlU3BlYy5kYiA9IGRiO1xuICAgIFNlcnZpY2VQcmljZVNwZWMubWV0YSA9IHtcbiAgICAgICAgXCJzY2hlbWFOYW1lXCI6IFwibGV2b0ZvdW5kYXRpb25cIixcbiAgICAgICAgXCJuYW1lXCI6IFwic2VydmljZVByaWNlXCIsXG4gICAgICAgIFwia2V5RmllbGRcIjogXCJpZFwiLFxuICAgICAgICBcImZpZWxkc1wiOiB7XG4gICAgICAgICAgICBcInN0YXJ0RGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICBcImRlZmF1bHRcIjoge1xuICAgICAgICAgICAgICAgICAgICBcIm9vbFR5cGVcIjogXCJTeW1ib2xUb2tlblwiLFxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJub3dcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiOiBcIlN0YXJ0IERhdGVcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZW5kRGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiZGF0ZXRpbWVcIixcbiAgICAgICAgICAgICAgICBcIm9wdGlvbmFsXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiOiBcIkVuZCBEYXRlXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImlzVmFsaWRcIjoge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcImJvb2xlYW5cIixcbiAgICAgICAgICAgICAgICBcImRpc3BsYXlOYW1lXCI6IFwiSXMgVmFsaWRcIixcbiAgICAgICAgICAgICAgICBcImNyZWF0ZUJ5RGJcIjogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiaWRcIjoge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICBcImF1dG9cIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcIndyaXRlT25jZVwiOiB0cnVlLFxuICAgICAgICAgICAgICAgIFwiZGlzcGxheU5hbWVcIjogXCJJZFwiLFxuICAgICAgICAgICAgICAgIFwiYXV0b0luY3JlbWVudElkXCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJjcmVhdGVCeURiXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInVuaXRcIjoge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcInRleHRcIixcbiAgICAgICAgICAgICAgICBcIm1heExlbmd0aFwiOiAyMCxcbiAgICAgICAgICAgICAgICBcImRpc3BsYXlOYW1lXCI6IFwiVW5pdFwiLFxuICAgICAgICAgICAgICAgIFwiY3JlYXRlQnlEYlwiOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJxdWFudGl0eVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwiaW50ZWdlclwiLFxuICAgICAgICAgICAgICAgIFwiZGlzcGxheU5hbWVcIjogXCJRdWFudGl0eVwiLFxuICAgICAgICAgICAgICAgIFwiY3JlYXRlQnlEYlwiOiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJhbW91bnRcIjoge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcIm51bWJlclwiLFxuICAgICAgICAgICAgICAgIFwic3ViQ2xhc3NcIjogW1xuICAgICAgICAgICAgICAgICAgICBcIm1vbmV5XCJcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFwiZGlzcGxheU5hbWVcIjogXCJBbW91bnRcIixcbiAgICAgICAgICAgICAgICBcImNyZWF0ZUJ5RGJcIjogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzY1wiOiB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIFwib3B0aW9uYWxcIjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBcInN1YkNsYXNzXCI6IFtcbiAgICAgICAgICAgICAgICAgICAgXCJkZXNjXCJcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIFwiZGlzcGxheU5hbWVcIjogXCJEZXNjXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInNlcnZpY2VcIjoge1xuICAgICAgICAgICAgICAgIFwidHlwZVwiOiBcImludGVnZXJcIixcbiAgICAgICAgICAgICAgICBcImRpc3BsYXlOYW1lXCI6IFwic2VydmljZUlkXCIsXG4gICAgICAgICAgICAgICAgXCJjcmVhdGVCeURiXCI6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInNlcnZpY2VMZXZlbFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ0eXBlXCI6IFwidGV4dFwiLFxuICAgICAgICAgICAgICAgIFwibWF4TGVuZ3RoXCI6IDIwLFxuICAgICAgICAgICAgICAgIFwic3ViQ2xhc3NcIjogW1xuICAgICAgICAgICAgICAgICAgICBcImNvZGVcIlxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgXCJkaXNwbGF5TmFtZVwiOiBcInNlcnZpY2VMZXZlbENvZGVcIixcbiAgICAgICAgICAgICAgICBcImNyZWF0ZUJ5RGJcIjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImZlYXR1cmVzXCI6IHtcbiAgICAgICAgICAgIFwiYXV0b0lkXCI6IHtcbiAgICAgICAgICAgICAgICBcImZpZWxkXCI6IFwiaWRcIlxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInVuaXF1ZUtleXNcIjogW1xuICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgIFwiaWRcIlxuICAgICAgICAgICAgXVxuICAgICAgICBdLFxuICAgICAgICBcImFzc29jaWF0aW9uc1wiOiB7XG4gICAgICAgICAgICBcInNlcnZpY2VcIjoge1xuICAgICAgICAgICAgICAgIFwiZW50aXR5XCI6IFwic2VydmljZVwiLFxuICAgICAgICAgICAgICAgIFwiaXNMaXN0XCI6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJzZXJ2aWNlTGV2ZWxcIjoge1xuICAgICAgICAgICAgICAgIFwiZW50aXR5XCI6IFwic2VydmljZUxldmVsXCIsXG4gICAgICAgICAgICAgICAgXCJpc0xpc3RcIjogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInByb21vdGlvbnNcIjoge1xuICAgICAgICAgICAgICAgIFwiZW50aXR5XCI6IFwic2VydmljZVByb21vdGlvblwiLFxuICAgICAgICAgICAgICAgIFwiaXNMaXN0XCI6IHRydWUsXG4gICAgICAgICAgICAgICAgXCJyZW1vdGVGaWVsZFwiOiBcInByaWNlXCIsXG4gICAgICAgICAgICAgICAgXCJvcHRpb25hbFwiOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZmllbGREZXBlbmRlbmNpZXNcIjoge1xuICAgICAgICAgICAgXCJpZFwiOiBbXG4gICAgICAgICAgICAgICAgXCJpZFwiXG4gICAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oU2VydmljZVByaWNlU3BlYywge30pO1xufTsiXX0=